<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Control.Effect</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">eff-0.0.0.0</span><ul class="links" id="page-menu"><li><a href="src/Control.Effect.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Effect</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Using effects</a></li><li><a href="#g:2">Defining new effects </a></li><li><a href="#g:3">Implementing new effect handlers</a><ul><li><a href="#g:4">The <code>EffT</code> transformer</a></li><li><a href="#g:5">The <code>Handles</code> type family</a></li><li><a href="#g:6">The <code>HandlerT</code> transformer</a></li></ul></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This library is an implementation of an <em>extensible effect system</em> for Haskell, a general-purpose
solution for tracking effects at the type level and handling them in flexible ways. The term
&#8220;effect&#8221; as used by this library is very general: it encompasses things most people consider
side-effects, such as generating random values, interacting with the file system, or mutating state,
but it also includes globally-pure but locally-impure operations such as access to an immutable
global environment or exception handling.</p><p>The traditional approach to effect composition in Haskell is <em>monad transformers</em>, but programming
against a concrete stack of monad transformers can make reuse difficult and tethers a program to a
particular implementation of each effect. The <code>mtl</code> library provides a partial solution to this
problem by providing a typeclass for each effect, which allow programmers to parameterize
computations over the monad they are executed in. However, that technique has problems of its own,
most notably that it requires <em>m</em>&#215;<em>n</em> instances be written for code that uses <em>m</em> distinct effects
and <em>n</em> distinct effect implementations.</p><p><code>eff</code> is a reformulation of <code>mtl</code> that avoids the &#8220;quadratic instance&#8221; problem. Like <code>mtl</code>, it uses
monad transformers to represent effect implementations, which <code>eff</code> calls effect <em>handlers</em>, and it
uses typeclasses to represent effects. Unlike <code>mtl</code>, <code>eff</code> uses a slightly different encoding that
allows explicit instances to be written <em>only</em> for the effects handled by each transformer,
requiring a linear rather than quadratic number of instances. It achieves this without any use of
overlapping instances or Template Haskell by keeping track of a little extra information at the type
level that can be used to guide instance selection.</p><p>Generally speaking, this library provides two discrete (but related) chunks of functionality:</p><ol><li>First, <code>eff</code> provides a library of common effects, such as <code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code>, <code><a href="Control-Effect-Error.html#t:Error" title="Control.Effect.Error">Error</a></code>, and <code><a href="Control-Effect-State.html#t:State" title="Control.Effect.State">State</a></code>, as
     well as handlers for them. These can be used out of the box the same way <code>transformers</code> and
     <code>mtl</code> can be, and they use a similar interface.</li><li>Second, <code>eff</code> exposes the infrastructure necessary to define <em>your own</em> effects and effect
     handlers, all of which automatically cooperate with the built-in effects and any effects
     defined in other libraries.</li></ol><p>Compared to other Haskell effect system libraries, such as <code>freer</code>, <code>polysemy</code>, and <code>fused-effects</code>,
<code>eff</code> distinguishes itself in the following respects:</p><ul><li><code>eff</code> is, at the time of this writing, the fastest effect system available. Its performance is
    equivalent to that of <code>mtl</code>, which is slightly faster than <code>fused-effects</code> and significantly
    faster than <code>freer</code> or <code>polysemy</code> on real workloads. It is designed specifically to take
    advantage of the GHC optimizer by cooperating with specialization as much as possible.</li><li><code>eff</code> integrates well with the existing <code>transformers</code> ecosystem. Effect handlers in <code>eff</code>
    are ordinary monad transformers, and many built-in effects are handled by the ordinary
    transformers from the <code>transformers</code> package. As in <code>fused-effects</code>, existing transformers can
    be easily adapted into effect handlers, but <code>eff</code> goes a step further by allowing existing
    <code>mtl</code>-style typeclasses to be used as effects, just by defining a couple small instances.</li><li>Despite its use of monad transformers and its focus on performance, defining effects and effect
    handlers in <code>eff</code> requires relatively little boilerplate, though <code>freer-simple</code> and <code>polysemy</code>
    provide some Template Haskell code that can generate most of the boilerplate automatically.
    Providing similar Template Haskell functionality is a future goal of this library, but it as not
    yet been implemented.</li><li>Unlike <code>freer</code>, but like <code>polysemy</code> and <code>fused-effects</code>, <code>eff</code> supports higher-order (or scoped)
    effects, in addition to the more traditional algebraic effects.</li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">class</span> <a href="Control-Effect-Internal.html#t:All" title="Control.Effect.Internal">All</a> effs m =&gt; <a href="#t:Can">Can</a> (effs :: [<a href="Control-Effect.html#t:EffectK" title="Control.Effect">EffectK</a>]) m</li><li class="src short"><span class="keyword">type</span> <a href="#t:EffectK">EffectK</a> = (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a></li><li class="src short"><span class="keyword">class</span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Control-Effect-Internal.html#t:Handle" title="Control.Effect.Internal">Handle</a> (<a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> t eff) eff t m) =&gt; <a href="#t:Send">Send</a> eff t m <span class="keyword">where</span><ul class="subs"><li><a href="#v:send">send</a> :: (<span class="keyword">forall</span> n. eff n =&gt; n a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a</li><li><a href="#v:sendWith">sendWith</a> :: (eff (t m) =&gt; t m a) -&gt; ((<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a> t, eff m) =&gt; t m a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a</li></ul></li><li class="src short"><a href="#v:controlT">controlT</a> :: (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a> t, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m)) =&gt; (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:Run" title="Control.Monad.Trans.Control">Run</a> t -&gt; m (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StT" title="Control.Monad.Trans.Control">StT</a> t a)) -&gt; t m a</li><li class="src short"><span class="keyword">type</span> <a href="#t:HandlerK">HandlerK</a> = (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:EffT">EffT</a> (t :: <a href="Control-Effect.html#t:HandlerK" title="Control.Effect">HandlerK</a>) m a = <a href="#v:EffT">EffT</a> {<ul class="subs"><li><a href="#v:runEffT">runEffT</a> :: t m a</li></ul>}</li><li class="src short"><span class="keyword">type family</span> <a href="#t:EffsT">EffsT</a> ts m <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:Handles">Handles</a> (t :: <a href="Control-Effect.html#t:HandlerK" title="Control.Effect">HandlerK</a>) (eff :: <a href="Control-Effect.html#t:EffectK" title="Control.Effect">EffectK</a>) :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><span class="keyword">type family</span> a <a href="#t:-61--61-">==</a> b <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:Elem">Elem</a> (x :: k) (xs :: [k]) :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:HandlerT">HandlerT</a> tag ts m a = <a href="#v:HandlerT">HandlerT</a> {<ul class="subs"><li><a href="#v:runHandlerT">runHandlerT</a> :: <a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m a</li></ul>}</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Using effects</h1></a><div class="doc"><p>Effects in <code>eff</code> are little more than ordinary typeclasses on monads. To show an example, the
definition of the standard <code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code> effect, which provides access to a global environment, is
written roughly as follows:</p><pre>class <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a></code> m =&gt; <code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code> r m where
  <code><a href="Control-Effect-Reader.html#v:ask" title="Control.Effect.Reader">ask</a></code> :: m r
  <code><a href="Control-Effect-Reader.html#v:local" title="Control.Effect.Reader">local</a></code> :: (r -&gt; r) -&gt; m a -&gt; m a
</pre><p>If you&#8217;re already familiar with <code>mtl</code>, this class may look familiar to you, and indeed, <code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code> is
effectively identical to the <code>MonadReader</code> class from <code>mtl</code>, but without the functional dependency
from <code>m</code> to <code>r</code>.</p><p>To write a function that uses a particular effect, simply add the effect as a constraint in the
function&#8217;s type signature. For example, the following function uses <code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code> to get access to a
<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></code>, combines it with its argument, then prints the result to the console:</p><pre>printSuffixed :: (<code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></code> m, <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a></code> m) =&gt; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></code> -&gt; m ()
printSuffixed suffix = do
  message &lt;- <code><a href="Control-Effect-Reader.html#v:ask" title="Control.Effect.Reader">ask</a></code>
  <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#v:liftIO" title="Control.Monad.IO.Class">liftIO</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#v:putStrLn" title="System.IO">putStrLn</a></code> (message <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code> suffix)
</pre><p>To <em>run</em> an effectful computation, use an <em>effect handler</em>. A single effect may have many different
effect handlers&#8212;for example, an effect that provides access to the filesystem might have both a real
implementation and one that uses an in-memory, virtual file system for testing&#8212;so the choice of what
an effect actually does is chosen when an effect is handled, not where it&#8217;s used. In the case of
<code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code>, we&#8217;ll use the built-in handler, <code><a href="Control-Effect-Reader.html#v:runReader" title="Control.Effect.Reader">runReader</a></code>, which just supplies the value that will be
returned by <code><a href="Control-Effect-Reader.html#v:ask" title="Control.Effect.Reader">ask</a></code>:</p><pre>&gt;&gt;&gt; <code><a href="Control-Effect-Reader.html#v:runReader" title="Control.Effect.Reader">runReader</a></code> &quot;Hello&quot; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> printSuffixed &quot;, world!&quot;
Hello, world!
</pre><p>How does this work? Take a look at the type of the above expression:</p><pre>&gt;&gt;&gt; :t <code><a href="Control-Effect-Reader.html#v:runReader" title="Control.Effect.Reader">runReader</a></code> &quot;Hello&quot; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> printSuffixed &quot;, world!&quot;
<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a></code> m =&gt; m ()
</pre><p>Notice that by using the <code><a href="Control-Effect-Reader.html#v:runReader" title="Control.Effect.Reader">runReader</a></code> handler, the <code><code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></code></code> effect was &#8220;discharged&#8221; from
the constraints, leaving only <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a></code>. This is how effects and effect handlers, work: a
computation may use many different effects, and they are handled one at a time by handlers until
none are left.</p><p>This library provides a handful of general-purpose, built-in effects. Most of them are a little more
complicated than <code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code>, but they all work the same basic way: add constraints to use effects,
then use handlers to discharge them. In many applications, it may make sense to build up a giant
list of effect constraints, then discharge them all at the top-level of your program, in the <code>main</code>
function. In other situations, it may make sense to discharge effects incrementally, sprinkling
handlers throughout the code. Both of these approaches are supported, so the decision of how to take
advantage of effects is up to you. </p></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Control-Effect-Internal.html#t:All" title="Control.Effect.Internal">All</a> effs m =&gt; <a id="t:Can" class="def">Can</a> (effs :: [<a href="Control-Effect.html#t:EffectK" title="Control.Effect">EffectK</a>]) m <a href="src/Control.Effect.Internal.html#Can" class="link">Source</a> <a href="#t:Can" class="selflink">#</a></p><div class="doc"><p>A helper type for combining effect constraints: <code>(<code><a href="Control-Effect.html#t:Can" title="Control.Effect">Can</a></code> '[e1, e2, e3, ..., en] m)</code> is
 equivalent to <code>(e1 m, e2 m, e3 m, ..., en m)</code>. The constraint <code><code><a href="Control-Effect.html#t:Can" title="Control.Effect">Can</a></code> effs m</code> should be read as
 specifying that the monad <code>m</code> <em>can</em> perform all of the effects in the list <code>effs</code>.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Can">Instances</h4><details id="i:Can" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Can:Can:1"></span> <a href="Control-Effect-Internal.html#t:All" title="Control.Effect.Internal">All</a> effs m =&gt; <a href="Control-Effect.html#t:Can" title="Control.Effect">Can</a> effs m</span> <a href="src/Control.Effect.Internal.html#line-322" class="link">Source</a> <a href="#t:Can" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Can:Can:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>Defining new effects <a id="defining_effects"></a></h1></a><div class="doc"><p>When using only the built-in effects and handlers, the interface of <code>eff</code> is not substantially
different from the interface of <code>mtl</code>. However, the benefits of <code>eff</code> appear when defining new
effects and effect handlers, not just using the built-in ones.</p><p>The first step to defining a new effect is easy: just write a typeclass that defines the operations
your effect should support. For example, to define an effect that supports interacting with the file
system, you might write the following:</p><pre>class <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a></code> m =&gt; FileSystem m where
  readFile :: <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; m <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></code>
  writeFile :: <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></code> -&gt; m ()
</pre><p>The next step is to teach <code>eff</code> about your brand new effect. To do that, you need to make the
special <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> monad transformer an instance of your new <code>FileSystem</code> effect. This part is mostly
just boilerplate, so it may be able to be generated automatically in a future version of this
library, but for now, it must be written by hand. Here is what the instance looks like for
<code>FileSystem</code>:</p><pre>instance (<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a></code> (t m), <code><a href="Control-Effect.html#t:Send" title="Control.Effect">Send</a></code> FileSystem t m) =&gt; FileSystem (<code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> t m) where
  readFile path = <code><a href="Control-Effect.html#v:send" title="Control.Effect">send</a></code> @FileSystem (readFile path)
  writeFile path contents = <code><a href="Control-Effect.html#v:send" title="Control.Effect">send</a></code> @FileSystem (writeFile path contents)
</pre><p>As you can see, this is an extremely boring instance, but it&#8217;s necessary to teach <code>eff</code> how to lift
actions though monad transformers. In this case, the solution is trivial, but it isn&#8217;t always so
simple. To see why, consider a third method you might want as part of the <code>FileSystem</code> effect:</p><pre>class <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a></code> m =&gt; FileSystem m where
  readFile :: <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; m <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></code>
  writeFile :: <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></code> -&gt; m ()
  <strong>withFile :: <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#v:IOMode" title="System.IO">IOMode</a></code> -&gt; (<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#v:Handle" title="System.IO">Handle</a></code> -&gt; m a) -&gt; m a</strong>
</pre><p>If you try to lift <code>withFile</code> the same way you will find it does not work. Why not? The answer stems
from the <code>(<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#v:Handle" title="System.IO">Handle</a></code> -&gt; m r)</code> argument. Because there are uses of <code>m</code> in the arguments to
the function, not just in the result (or more precisely, uses of <code>m</code> in negative positions), lifting
<code>withFile</code> also requires &#8220;lowering&#8221; the action produced by the callback. This kind of effect is
called a <em>higher-order</em>, or <em>scoped</em>, effect.</p><p>The <code><a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a></code> class from the <code>monad-control</code> package is designed to lift higher-order
effects. While <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/transformers-0.5.6.2/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a></code> provides the power to <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/transformers-0.5.6.2/Control-Monad-Trans-Class.html#v:lift" title="Control.Monad.Trans.Class">lift</a></code> actions, <code><a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a></code> provides the
additional power to lower certain actions in the process.</p><p>To update the <code>FileSystem</code> instance for <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code>, it is necessary to use the more powerful <code><a href="Control-Effect.html#v:sendWith" title="Control.Effect">sendWith</a></code>
operation to implement <code>withFile</code>. <code><a href="Control-Effect.html#v:sendWith" title="Control.Effect">sendWith</a></code> accepts two arguments instead of one: the first
argument specifies how to run the action in the current monad, if it supports handling the effect,
while the second argument specifies how to lift the action into the underlying monad, doing any
lowering that may be necessary along the way. In this particular case, the method implementation
looks like this:</p><pre>  withFile path mode f = <code><a href="Control-Effect.html#v:sendWith" title="Control.Effect">sendWith</a></code> @FileSystem
    (writeFile path mode (<code><a href="Control-Effect.html#v:runEffT" title="Control.Effect">runEffT</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:." title="Data.Function">.</a></code> f))
    (<code><a href="Control-Effect.html#v:controlT" title="Control.Effect">controlT</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> \lower -&gt; writeFile path mode (lower <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="Control-Effect.html#v:runEffT" title="Control.Effect">runEffT</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:." title="Data.Function">.</a></code> f))
</pre><p>A full explanation of <code><a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a></code> is outside the scope of this documentation; see the
documentation for <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html">Control.Monad.Trans.Control</a> for more details. </p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:EffectK" class="def">EffectK</a> = (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <a href="src/Control.Effect.Internal.html#EffectK" class="link">Source</a> <a href="#t:EffectK" class="selflink">#</a></p><div class="doc"><p>The kind of effects, which are classes of monads.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Control-Effect-Internal.html#t:Handle" title="Control.Effect.Internal">Handle</a> (<a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> t eff) eff t m) =&gt; <a id="t:Send" class="def">Send</a> eff t m <span class="keyword">where</span> <a href="src/Control.Effect.Internal.html#Send" class="link">Source</a> <a href="#t:Send" class="selflink">#</a></p><div class="doc"><p>A typeclass used to lift effectful actions into effect handlers. This is not necessary to use
 directly when using effects, but it is used as part of defining new effects. Every effect should
 be given an instance on <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> of the shape</p><pre>instance <code><a href="Control-Effect.html#t:Send" title="Control.Effect">Send</a></code> <em>eff</em> t m =&gt; <em>eff</em> (<code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> t m) where
</pre><p>where <code><em>eff</em></code> is replaced by the actual effect in question. Each method should be implemented
 using <code><a href="Control-Effect.html#v:send" title="Control.Effect">send</a></code> or <code><a href="Control-Effect.html#v:sendWith" title="Control.Effect">sendWith</a></code>: <code><a href="Control-Effect.html#v:send" title="Control.Effect">send</a></code> for algebraic/first-order operations and <code><a href="Control-Effect.html#v:sendWith" title="Control.Effect">sendWith</a></code> for
 scoped/higher-order ones.</p><p>There is no need to define any additional instances of this class.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Control-Effect.html#v:sendWith" title="Control.Effect">sendWith</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:send" class="def">send</a> :: (<span class="keyword">forall</span> n. eff n =&gt; n a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="src/Control.Effect.Internal.html#send" class="link">Source</a> <a href="#v:send" class="selflink">#</a></p><div class="doc"><p>Constructs an <code><code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> t m a</code> computation for an algebraic/first-order operation. Each
 first-order method in the <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> instance for a given effect should have the shape</p><pre><em>method</em> <em>a</em> <em>b</em> <em>c</em> = <code><a href="Control-Effect.html#v:send" title="Control.Effect">send</a></code> @<em>eff</em> (<em>method</em> <em>a</em> <em>b</em> <em>c</em>)
</pre><p>where <code><em>method</em> <em>a</em> <em>b</em> <em>c</em></code> should be replaced with the method and its arguments, and <code><em>eff</em></code>
 should be replaced with the type of the effect. The explicit type application is necessary
 because <code>eff</code> only appears in a constraint in the type signature for <code><a href="Control-Effect.html#v:send" title="Control.Effect">send</a></code>, which GHC cannot
 automatically infer.</p><p><code><code><a href="Control-Effect.html#v:send" title="Control.Effect">send</a></code> @<em>eff</em> <em>m</em></code> is equivalent to <code><code><a href="Control-Effect.html#v:sendWith" title="Control.Effect">sendWith</a></code> @<em>eff</em> <em>m</em> (<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/transformers-0.5.6.2/Control-Monad-Trans-Class.html#v:lift" title="Control.Monad.Trans.Class">lift</a></code> <em>m</em>)</code>.</p></div><p class="src"><a id="v:sendWith" class="def">sendWith</a> <a href="src/Control.Effect.Internal.html#sendWith" class="link">Source</a> <a href="#v:sendWith" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (eff (t m) =&gt; t m a)</td><td class="doc"><p>An action to run in the current handler.</p></td></tr><tr><td class="src">-&gt; ((<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a> t, eff m) =&gt; t m a)</td><td class="doc"><p>An action that delegates to the underlying monad.</p></td></tr><tr><td class="src">-&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Constructs an <code><code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> t m a</code> computation for a higher-order/scoped effect <code>eff</code> from two
 actions:</p><ol><li>A &#8220;run&#8221; action, which executes the effect in the <code>(t m)</code> monad given <code>(t m)</code> has an
      instance of <code>eff</code>.</li><li>A &#8220;lift&#8221; action, which lifts the effect through <code>(t m)</code> into <code>m</code> given that <code>t</code> has a
      <code><a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a></code> instance and <code>m</code> has an instance of <code>eff</code>.</li></ol><p>Each higher-order method in the <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> instance for a given effect should use <code><a href="Control-Effect.html#v:sendWith" title="Control.Effect">sendWith</a></code> to
 specify how it ought to be lifted through effect handlers. For example, the definition of
 <code><a href="Control-Effect-Reader.html#v:local" title="Control.Effect.Reader">local</a></code> looks like this:</p><pre><code><a href="Control-Effect-Reader.html#v:local" title="Control.Effect.Reader">local</a></code> f m = <code><a href="Control-Effect.html#v:sendWith" title="Control.Effect">sendWith</a></code> @(<code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code> r)
  (<code><a href="Control-Effect-Reader.html#v:local" title="Control.Effect.Reader">local</a></code> f (<code><a href="Control-Effect.html#v:runEffT" title="Control.Effect">runEffT</a></code> m))
  (<code><a href="Control-Effect.html#v:controlT" title="Control.Effect">controlT</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> \lower -&gt; <code><a href="Control-Effect-Reader.html#v:local" title="Control.Effect.Reader">local</a></code> f (lower <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> <code><a href="Control-Effect.html#v:runEffT" title="Control.Effect">runEffT</a></code> m))
</pre><p>With this instance in place, <code><code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code> r</code> can automatically be used with <code><code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> t m a</code>.
 Transformers that can handle the <code><code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code> r</code> effect (i.e. ones for which
 <code><code><a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a></code> t (<code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code> r) ~ '<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code></code>) will use their <code><code><a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a></code> r</code> instances, while other
 transformers will delegate to the underlying monad.</p></div></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Send">Instances</h4><details id="i:Send" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Send:Send:1"></span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Control-Effect-Internal.html#t:Handle" title="Control.Effect.Internal">Handle</a> (<a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> t eff) eff t m) =&gt; <a href="Control-Effect.html#t:Send" title="Control.Effect">Send</a> eff t m</span> <a href="src/Control.Effect.Internal.html#line-300" class="link">Source</a> <a href="#t:Send" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Send:Send:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:send">send</a> :: (<span class="keyword">forall</span> (n :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>). eff n =&gt; n a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="src/Control.Effect.Internal.html#send" class="link">Source</a> <a href="#v:send" class="selflink">#</a></p><p class="src"><a href="#v:sendWith">sendWith</a> :: (eff (t m) =&gt; t m a) -&gt; ((<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a> t, eff m) =&gt; t m a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="src/Control.Effect.Internal.html#sendWith" class="link">Source</a> <a href="#v:sendWith" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:controlT" class="def">controlT</a> :: (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a> t, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m)) =&gt; (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:Run" title="Control.Monad.Trans.Control">Run</a> t -&gt; m (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StT" title="Control.Monad.Trans.Control">StT</a> t a)) -&gt; t m a <a href="src/Control.Effect.Internal.html#controlT" class="link">Source</a> <a href="#v:controlT" class="selflink">#</a></p><div class="doc"><p>Using <code><a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a></code>, lifts a higher-order effectful operation into the underlying monad.
 It is named by analogy to <code><a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#v:control" title="Control.Monad.Trans.Control">control</a></code>, since both are intended for lifting &#8220;control operations,&#8221;
 i.e. operations that affect control flow.</p><p><code><code><a href="Control-Effect.html#v:controlT" title="Control.Effect">controlT</a></code> f</code> is equivalent to <code><code><a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#v:restoreT" title="Control.Monad.Trans.Control">restoreT</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> =&lt;&lt; <code><a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#v:liftWith" title="Control.Monad.Trans.Control">liftWith</a></code> f</code>, but it is rare that
 <code><a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#v:restoreT" title="Control.Monad.Trans.Control">restoreT</a></code> or <code><a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#v:liftWith" title="Control.Monad.Trans.Control">liftWith</a></code> need to be used directly.</p></div></div><a href="#g:3" id="g:3"><h1>Implementing new effect handlers</h1></a><div class="doc"><p>In <code>eff</code>, effect handlers are encoded as monad transformers. The core, primitive effects of <code>eff</code>
are therefore implemented as unique monad transformers that provide implementations of different
effects. However, in practice, most custom handlers do not need to define their own monad
transformers, as they can be defined in terms of the existing effect handlers already provided by
<code>eff</code>.</p><p>To provide a concrete example, consider the hypothetical <code>FileSystem</code> effect defined in the previous
section on defining new effects. To keep things simple, we will not handle the higher-order
<code>withFile</code> operation, as the complexity it adds is not any different from the complexity already
covered. That leaves us with the following effect:</p><pre>class <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a></code> m =&gt; FileSystem m where
  readFile :: <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; m <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></code>
  writeFile :: <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></code> -&gt; m ()
</pre><h2>Defining impure effect handlers</h2><p>To implement an effectful version of this handler that actually interacts with the real filesystem,
the implementation can trivially defer to <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html">System.IO</a>.<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#v:readFile" title="System.IO">readFile</a></code></code> and <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html">System.IO</a>.<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#v:writeFile" title="System.IO">writeFile</a></code></code>,
which do all the actual work. All that is necessary is to write a small bit of glue code to connect
the two together.</p><p>To do that, start by defining a new, unique &#8220;tag&#8221; type that will provide a name for the new handler.
The actual name of the type is irrelevant, and it does not need to be inhabited; its only purpose is
as a unique tag at the type level:</p><pre>data FileSystemIO
</pre><p>Next, define <code>FileSystemIOT</code> as an alias for <code><a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a></code> applied to the unique tag:</p><pre>type FileSystemIOT = <code><a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a></code> FileSystemIO '[]
</pre><p>The empty list provided as the second argument to <code><a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a></code> is explained in the section below, but
it is not relevant just yet. For now, just define an ordinary instance of <code>FileSystem</code> for
<code>FileSystemIOT</code>:</p><pre>instance <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a></code> m =&gt; FileSystem (FileSystemIOT m) where
  readFile path = <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#v:liftIO" title="Control.Monad.IO.Class">liftIO</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html">System.IO</a>.<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#v:readFile" title="System.IO">readFile</a></code> path
  writeFile path contents = <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#v:liftIO" title="Control.Monad.IO.Class">liftIO</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html">System.IO</a>.<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#v:writeFile" title="System.IO">writeFile</a></code> path contents
</pre><p>The next step is to teach <code>eff</code> that <code>FileSystemIOT</code> is a handler for the <code>FileSystem</code> effect, as
there is no way for <code>eff</code> to automatically detect the presence of the new <code>FileSystem</code> instance. To
do this, define a new instance of the <code><a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a></code> type family:</p><pre>type instance <code><a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a></code> FileSystemIOT eff = eff <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Type-Equality.html#v:-61--61-" title="Data.Type.Equality">==</a></code> FileSystem
</pre><p>This instance can be read as saying &#8220;<code>FileSystemIOT</code> is a handler for some effect <code>eff</code>
<em>if and only if</em> <code>eff</code> is <code>FileSystem</code>.&#8221; The precision is important, as <code>eff</code> needs to know for
certain that it does not handle any <em>other</em> effects so that it can lift them properly. (A handler
can, if it wants, handle multiple effects.)</p><p>With both the <code>FileSystem</code> and <code><a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a></code> instances in place, all that&#8217;s left to do is to define a
<code>runFileSystemIO</code> function that can be used to actually handle the effect:</p><pre>runFileSystemIO :: <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> FileSystemIOT m a -&gt; m a
runFileSystemIO = <code><a href="Control-Effect.html#v:runHandlerT" title="Control.Effect">runHandlerT</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="Control-Effect.html#v:runEffT" title="Control.Effect">runEffT</a></code>
</pre><p>You may note that this function does not really do any &#8220;running&#8221; at all; both <code><a href="Control-Effect.html#v:runEffT" title="Control.Effect">runEffT</a></code> and
<code><a href="Control-Effect.html#v:runHandlerT" title="Control.Effect">runHandlerT</a></code> do nothing more than unwrap the <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> and <code><a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a></code> newtypes, respectively. The real
purpose of the <code>runFileSystemIO</code> is to guide the type system to select the <code>FileSystem</code> instance for
<code>FileSystemIOT</code>, nothing more.</p><p>There is nothing left to do: this effect handler is now fully-functional! To use it, write a
function that uses the <code>FileSystem</code> effect and run it as you would any other effect:</p><pre>copyFile :: FileSystem m =&gt; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; m ()
copyFile inPath outPath = do
  contents &lt;- readFile inPath
  writeFile outPath contents

copyFileIO :: <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a></code> m =&gt; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> -&gt; m ()
copyFileIO inPath outPath = runFileSystemIO <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> copyFile inPath outPath
</pre><h2>Defining pure effect handlers</h2><p>The <code>runFileSystemIO</code> handler might feel like cheating, since it didn&#8217;t actually do anything&#8212;it just
deferred to the existing implementations. To provide a more complicated example, we&#8217;ll implement a
pure handler for <code>FileSystem</code> that uses a fake, in-memory filesystem instead of the real one. (This
could be useful for unit testing, for example.)</p><p>The process for defining this new handler is largely the same, so once again, start by defining a
new type-level tag for the effect:</p><pre>data FileSystemPure
</pre><p>The next step is to define a <code>FileSystem</code> instance, but this time, the instance won&#8217;t use <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a></code>.
Instead, it will delegate to two different effets: a <code><a href="Control-Effect-State.html#t:State" title="Control.Effect.State">State</a></code> effect to store the virtual filesystem
and a <code><a href="Control-Effect-Error.html#t:Error" title="Control.Effect.Error">Error</a></code> effect to handle errors. In this case, the <code>FileSystemPureT</code> handler should keep the
<code><a href="Control-Effect-State.html#t:State" title="Control.Effect.State">State</a></code> effect &#8220;private&#8221;&#8212;it should be an implementation detail of the handler that does not leak out
into calling code&#8212;but the <code><a href="Control-Effect-Error.html#t:Error" title="Control.Effect.Error">Error</a></code> effect should defer the choice of handler to the caller. This is
where the second argument to <code><a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a></code> comes in. Any &#8220;private&#8221; effect handlers should go in that
list, so <code>FileSystemPureT</code> can be defined as follows:</p><pre>-- | A mapping from file paths to file contents.
type VirtualFileSystem = [(<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code>, <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></code>)]

type FileSystemPureT = <code><a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a></code> FileSystemPure '[<code><a href="Control-Effect-State.html#t:StateT" title="Control.Effect.State">StateT</a></code> VirtualFileSystem]
type instance <code><a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a></code> FileSystemPureT eff = eff <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Type-Equality.html#v:-61--61-" title="Data.Type.Equality">==</a></code> FileSystem
</pre><p>The &#8220;public&#8221; effects are not specified on the handler type itself, as they are attached to the
handler instances themselves (like <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a></code> was attached to the <code>FileSystem</code> instance for
<code>FileSystemIOT</code>). Here is the instance for <code>FileSystemPureT</code>:</p><pre>instance <code><a href="Control-Effect-Error.html#t:Error" title="Control.Effect.Error">Error</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></code> m =&gt; FileSystem (FileSystemPureT m) where
  readFile path = <code><a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> do
    fileSystem &lt;- <code><a href="Control-Effect-State.html#v:get" title="Control.Effect.State">get</a></code>
    case <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/GHC-List.html#v:lookup" title="GHC.List">lookup</a></code> path fileSystem of
      <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code> contents -&gt; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> contents
      <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>       -&gt; <code><a href="Control-Effect-Error.html#v:throw" title="Control.Effect.Error">throw</a></code> (&quot;readFile: no such file &quot; <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code> path)

  writeFile path contents = <code><a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> do
    fileSystem &lt;- <code><a href="Control-Effect-State.html#v:get" title="Control.Effect.State">get</a></code>
    -- add the new file and remove an old file with the same name, if it exists
    <code><a href="Control-Effect-State.html#v:put" title="Control.Effect.State">put</a></code> ((path, contents) : <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/GHC-List.html#v:filter" title="GHC.List">filter</a></code> ((<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Eq.html#v:-47--61-" title="Data.Eq">/=</a></code> path) <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Tuple.html#v:fst" title="Data.Tuple">fst</a></code>) fileSystem)
</pre><p>Finally, we define the handler function. This handler function will be a little more interesting
than <code>runFileSystemIO</code> because it will discharge the <code>(<code><a href="Control-Effect-State.html#t:State" title="Control.Effect.State">State</a></code> VirtualFileSystem)</code> effect <em>locally</em>,
keeping the implementation details of the <code>FileSystemPure</code> handler hidden:</p><pre>runFileSystemPure :: <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> FileSystemPureT m a -&gt; m a
runFileSystemPure = <code><a href="Control-Effect-State.html#v:evalState" title="Control.Effect.State">evalState</a></code> [] <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="Control-Effect.html#v:runHandlerT" title="Control.Effect">runHandlerT</a></code> <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="Control-Effect.html#v:runEffT" title="Control.Effect">runEffT</a></code>
</pre><p>This demonstrates an important capability of effect handlers: not only are they modular, they don&#8217;t
all have to be run together at once. This allows <code>runFileSystemPure</code> to handle the <code><a href="Control-Effect-State.html#t:State" title="Control.Effect.State">State</a></code> effect
locally but pass the <code><a href="Control-Effect-Error.html#t:Error" title="Control.Effect.Error">Error</a></code> effect on to its caller. The capability allows handlers to be reused to
define other effects without leaking their implementation details. </p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:HandlerK" class="def">HandlerK</a> = (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="src/Control.Effect.Internal.html#HandlerK" class="link">Source</a> <a href="#t:HandlerK" class="selflink">#</a></p><div class="doc"><p>The kind of effect handlers, which are monad transformers.</p></div></div><a href="#g:4" id="g:4"><h2>The <code>EffT</code> transformer</h2></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:EffT" class="def">EffT</a> (t :: <a href="Control-Effect.html#t:HandlerK" title="Control.Effect">HandlerK</a>) m a <a href="src/Control.Effect.Internal.html#EffT" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></p><div class="doc"><p>A monad transformer for handling effects. <code>(<code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> t)</code> is actually no different from <code>t</code> at
 runtime, but it provides a different set of instances. Wrapping a monad transformer with <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code>
 allows other effects to be automatically lifted through it, provided the underlying transformer
 provides a <code><a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a></code> instance.</p><p><code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> cannot be used with any arbitrary monad transformer: all monad transformers wrapped with
 <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> <em>must</em> provide an instance of the <code><a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a></code> type family to cooperate with effect with the
 effect lifting machinery. However, note that this requirement only applies to transformers
 wrapped in <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> directly, i.e. used as the <code>t</code> argument in <code>(<code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> t)</code>; there are no
 restrictions placed on the underlying monad (though effects will not be able to be automatically
 lifted through non-<code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> layers).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:EffT" class="def">EffT</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:runEffT" class="def">runEffT</a> :: t m a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:EffT">Instances</h4><details id="i:EffT" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:MonadBase:1"></span> (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/trnsfrmrs-bs-0.4.5.2-8b2d87c0/share/doc/html/Control-Monad-Base.html#t:MonadBase" title="Control.Monad.Base">MonadBase</a> b m, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/transformers-0.5.6.2/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> t, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m)) =&gt; <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/trnsfrmrs-bs-0.4.5.2-8b2d87c0/share/doc/html/Control-Monad-Base.html#t:MonadBase" title="Control.Monad.Base">MonadBase</a> b (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Internal.html#line-58" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:MonadBase:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftBase">liftBase</a> :: b &#945; -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m &#945; <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/trnsfrmrs-bs-0.4.5.2-8b2d87c0/share/doc/html/src" class="link">Source</a> <a href="#v:liftBase" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:MonadBaseControl:2"></span> (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadBaseControl" title="Control.Monad.Trans.Control">MonadBaseControl</a> b m, <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a> t, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m)) =&gt; <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadBaseControl" title="Control.Monad.Trans.Control">MonadBaseControl</a> b (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Internal.html#line-62" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:MonadBaseControl:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m) a <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/src" class="link">Source</a> <a href="#t:StM" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftBaseWith">liftBaseWith</a> :: (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:RunInBase" title="Control.Monad.Trans.Control">RunInBase</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m) b -&gt; b a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/src" class="link">Source</a> <a href="#v:liftBaseWith" class="selflink">#</a></p><p class="src"><a href="#v:restoreM">restoreM</a> :: <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m) a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/src" class="link">Source</a> <a href="#v:restoreM" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:Error:3"></span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m), <a href="Control-Effect.html#t:Send" title="Control.Effect">Send</a> (<a href="Control-Effect-Error.html#t:Error" title="Control.Effect.Error">Error</a> e) t m) =&gt; <a href="Control-Effect-Error.html#t:Error" title="Control.Effect.Error">Error</a> e (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Error.html#line-31" class="link">Source</a> <a href="#t:Error" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:Error:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Error.html">Control.Effect.Error</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:throw">throw</a> :: e -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="src/Control.Effect.Error.html#throw" class="link">Source</a> <a href="#v:throw" class="selflink">#</a></p><p class="src"><a href="#v:catch">catch</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; (e -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="src/Control.Effect.Error.html#catch" class="link">Source</a> <a href="#v:catch" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:Reader:4"></span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m), <a href="Control-Effect.html#t:Send" title="Control.Effect">Send</a> (<a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a> r) t m) =&gt; <a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a> r (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Reader.html#line-34" class="link">Source</a> <a href="#t:Reader" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:Reader:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Reader.html">Control.Effect.Reader</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ask">ask</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m r <a href="src/Control.Effect.Reader.html#ask" class="link">Source</a> <a href="#v:ask" class="selflink">#</a></p><p class="src"><a href="#v:asks">asks</a> :: (r -&gt; a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="src/Control.Effect.Reader.html#asks" class="link">Source</a> <a href="#v:asks" class="selflink">#</a></p><p class="src"><a href="#v:local">local</a> :: (r -&gt; r) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="src/Control.Effect.Reader.html#local" class="link">Source</a> <a href="#v:local" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:State:5"></span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m), <a href="Control-Effect.html#t:Send" title="Control.Effect">Send</a> (<a href="Control-Effect-State.html#t:State" title="Control.Effect.State">State</a> s) t m) =&gt; <a href="Control-Effect-State.html#t:State" title="Control.Effect.State">State</a> s (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.State.html#line-40" class="link">Source</a> <a href="#t:State" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:State:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-State.html">Control.Effect.State</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:get">get</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m s <a href="src/Control.Effect.State.html#get" class="link">Source</a> <a href="#v:get" class="selflink">#</a></p><p class="src"><a href="#v:put">put</a> :: s -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m () <a href="src/Control.Effect.State.html#put" class="link">Source</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:modify">modify</a> :: (s -&gt; s) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m () <a href="src/Control.Effect.State.html#modify" class="link">Source</a> <a href="#v:modify" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:Writer:6"></span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> w, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m), <a href="Control-Effect.html#t:Send" title="Control.Effect">Send</a> (<a href="Control-Effect-Writer.html#t:Writer" title="Control.Effect.Writer">Writer</a> w) t m) =&gt; <a href="Control-Effect-Writer.html#t:Writer" title="Control.Effect.Writer">Writer</a> w (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Writer.html#line-39" class="link">Source</a> <a href="#t:Writer" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:Writer:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Writer.html">Control.Effect.Writer</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:tell">tell</a> :: w -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m () <a href="src/Control.Effect.Writer.html#tell" class="link">Source</a> <a href="#v:tell" class="selflink">#</a></p><p class="src"><a href="#v:listen">listen</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m (w, a) <a href="src/Control.Effect.Writer.html#listen" class="link">Source</a> <a href="#v:listen" class="selflink">#</a></p><p class="src"><a href="#v:censor">censor</a> :: (w -&gt; w) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="src/Control.Effect.Writer.html#censor" class="link">Source</a> <a href="#v:censor" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:MonadTrans:7"></span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/transformers-0.5.6.2/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> t =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/transformers-0.5.6.2/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t)</span> <a href="src/Control.Effect.Internal.html#line-42" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:MonadTrans:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="#v:lift" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:MonadTransControl:8"></span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a> t =&gt; <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t)</span> <a href="src/Control.Effect.Internal.html#line-42" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:MonadTransControl:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StT" title="Control.Monad.Trans.Control">StT</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t) a <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/src" class="link">Source</a> <a href="#t:StT" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftWith">liftWith</a> :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:Run" title="Control.Monad.Trans.Control">Run</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t) -&gt; m a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/src" class="link">Source</a> <a href="#v:liftWith" class="selflink">#</a></p><p class="src"><a href="#v:restoreT">restoreT</a> :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; m (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StT" title="Control.Monad.Trans.Control">StT</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t) a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/src" class="link">Source</a> <a href="#v:restoreT" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:Monad:9"></span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Internal.html#line-42" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:Monad:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; (a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:Functor:10"></span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (t m) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Internal.html#line-42" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:Functor:10"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:Applicative:11"></span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (t m) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Internal.html#line-42" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:Applicative:11"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m (a -&gt; b) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:MonadIO:12"></span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/transformers-0.5.6.2/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> t, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m)) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Internal.html#line-54" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:MonadIO:12"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftIO">liftIO</a> :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="#v:liftIO" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:Alternative:13"></span> (<a href="Control-Effect.html#t:Send" title="Control.Effect">Send</a> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> t m, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m)) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Internal.html#line-44" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:Alternative:13"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:empty">empty</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="#v:empty" class="selflink">#</a></p><p class="src"><a href="#v:-60--124--62-">(&lt;|&gt;)</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="#v:-60--124--62-" class="selflink">#</a></p><p class="src"><a href="#v:some">some</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m [a] <a href="#v:some" class="selflink">#</a></p><p class="src"><a href="#v:many">many</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m [a] <a href="#v:many" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:MonadPlus:14"></span> (<a href="Control-Effect.html#t:Send" title="Control.Effect">Send</a> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> t m, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m)) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:MonadPlus" title="Control.Monad">MonadPlus</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Internal.html#line-52" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:MonadPlus:14"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mzero">mzero</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="#v:mzero" class="selflink">#</a></p><p class="src"><a href="#v:mplus">mplus</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="#v:mplus" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:MonadUnwind:15"></span> <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> (t m) =&gt; <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Resource.html#line-119" class="link">Source</a> <a href="#t:MonadUnwind" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:MonadUnwind:15"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:onException">onException</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="src/Control.Effect.Resource.html#onException" class="link">Source</a> <a href="#v:onException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:Mask:16"></span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m), <a href="Control-Effect.html#t:Send" title="Control.Effect">Send</a> <a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> t m) =&gt; <a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Resource.html#line-83" class="link">Source</a> <a href="#t:Mask" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:Mask:16"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mask">mask</a> :: ((<span class="keyword">forall</span> a. <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b <a href="src/Control.Effect.Resource.html#mask" class="link">Source</a> <a href="#v:mask" class="selflink">#</a></p><p class="src"><a href="#v:uninterruptibleMask">uninterruptibleMask</a> :: ((<span class="keyword">forall</span> a. <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b <a href="src/Control.Effect.Resource.html#uninterruptibleMask" class="link">Source</a> <a href="#v:uninterruptibleMask" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:StT:17"></span> <span class="keyword">type</span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StT" title="Control.Monad.Trans.Control">StT</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t) a</span> <a href="src/Control.Effect.Internal.html#line-42" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:StT:17"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StT" title="Control.Monad.Trans.Control">StT</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t) a = <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StT" title="Control.Monad.Trans.Control">StT</a> t a</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EffT:StM:18"></span> <span class="keyword">type</span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m) a</span> <a href="src/Control.Effect.Internal.html#line-63" class="link">Source</a> <a href="#t:EffT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EffT:StM:18"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m) a = <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:ComposeSt" title="Control.Monad.Trans.Control">ComposeSt</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t) m a</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:EffsT" class="def">EffsT</a> ts m <span class="keyword">where ...</span> <a href="src/Control.Effect.Internal.html#EffsT" class="link">Source</a> <a href="#t:EffsT" class="selflink">#</a></p><div class="doc"><p>A type alias for a stack of nested <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> transformers: <code><code><a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a></code> '[t1, t2, ..., tn] m</code> is
 equivalent to <code><code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> t1 (<code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> t2 (... (<code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> tn m) ...))</code>.</p><p>This can be considered the implementation dual to the <code><a href="Control-Effect.html#t:Can" title="Control.Effect">Can</a></code> interface.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> '[] m = m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> (t ': ts) m = <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t (<a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><a href="#g:5" id="g:5"><h2>The <code>Handles</code> type family</h2></a><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:Handles" class="def">Handles</a> (t :: <a href="Control-Effect.html#t:HandlerK" title="Control.Effect">HandlerK</a>) (eff :: <a href="Control-Effect.html#t:EffectK" title="Control.Effect">EffectK</a>) :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Control.Effect.Internal.html#Handles" class="link">Source</a> <a href="#t:Handles" class="selflink">#</a></p><div class="doc"><p>An open type family that is used to determine which effects ought to be handled by which
 handlers. If <code><code><a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a></code> t eff</code> ~ '<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> for some handler <code>t</code> and effect <code>eff</code>, the handler will
 be used to handle any effects sent to it via <code><a href="Control-Effect.html#v:send" title="Control.Effect">send</a></code>; otherwise, the effect will be lifted to the
 next handler in the stack.</p><p>It is important that <code><code><a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a></code> t</code> is total in its argument; that is, it is important that
 effects that <em>cannot</em> be handled produce <code>'<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code></code>, not just that effects that can be handled
 produce <code>'<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code></code>. The <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Type-Equality.html#v:-61--61-" title="Data.Type.Equality">==</a></code> type family is provided for this purpose: If a
 handler only handles a single effect, its <code><a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a></code> instance should look like the following:</p><pre>type <code><a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a></code> MyEffectT eff = eff <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Type-Equality.html#v:-61--61-" title="Data.Type.Equality">==</a></code> MyEffect
</pre><p>If it handles multiple effects, it can use the <code><a href="Control-Effect.html#t:Elem" title="Control.Effect">Elem</a></code> type family instead:</p><pre>type <code><a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a></code> MyEffectT eff = eff `<code><a href="Control-Effect.html#t:Elem" title="Control.Effect">Elem</a></code>` '[MyEffect1, MyEffect2]
</pre><p>More complex <code><a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a></code> instances are possible, but not generally very useful.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Handles">Instances</h4><details id="i:Handles" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:Handles:Handles:1"></span> <span class="keyword">type</span> <a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> (<a href="Control-Effect-Reader.html#t:ReaderT" title="Control.Effect.Reader">ReaderT</a> r) eff</span> <a href="src/Control.Effect.Internal.html#line-206" class="link">Source</a> <a href="#t:Handles" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:Handles:Handles:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="src"><span class="keyword">type</span> <a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> (<a href="Control-Effect-Reader.html#t:ReaderT" title="Control.Effect.Reader">ReaderT</a> r) eff = eff <a href="Control-Effect.html#t:-61--61-" title="Control.Effect">==</a> <a href="Control-Effect-Reader.html#t:Reader" title="Control.Effect.Reader">Reader</a> r</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:Handles:Handles:2"></span> <span class="keyword">type</span> <a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> (<a href="Control-Effect-Error.html#t:ExceptT" title="Control.Effect.Error">ExceptT</a> e) eff</span> <a href="src/Control.Effect.Internal.html#line-205" class="link">Source</a> <a href="#t:Handles" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:Handles:Handles:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="src"><span class="keyword">type</span> <a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> (<a href="Control-Effect-Error.html#t:ExceptT" title="Control.Effect.Error">ExceptT</a> e) eff = eff <a href="Control-Effect.html#t:-61--61-" title="Control.Effect">==</a> <a href="Control-Effect-Error.html#t:Error" title="Control.Effect.Error">Error</a> e</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:Handles:Handles:3"></span> <span class="keyword">type</span> <a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> (<a href="Control-Effect-State.html#t:StateT" title="Control.Effect.State">StateT</a> s) eff</span> <a href="src/Control.Effect.Internal.html#line-207" class="link">Source</a> <a href="#t:Handles" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:Handles:Handles:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="src"><span class="keyword">type</span> <a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> (<a href="Control-Effect-State.html#t:StateT" title="Control.Effect.State">StateT</a> s) eff = eff <a href="Control-Effect.html#t:-61--61-" title="Control.Effect">==</a> <a href="Control-Effect-State.html#t:State" title="Control.Effect.State">State</a> s</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:Handles:Handles:4"></span> <span class="keyword">type</span> <a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> (<a href="Control-Effect-Writer.html#t:WriterT" title="Control.Effect.Writer">WriterT</a> w) eff</span> <a href="src/Control.Effect.Writer.html#line-58" class="link">Source</a> <a href="#t:Handles" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:Handles:Handles:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Writer.html">Control.Effect.Writer</a></p> <div class="src"><span class="keyword">type</span> <a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> (<a href="Control-Effect-Writer.html#t:WriterT" title="Control.Effect.Writer">WriterT</a> w) eff = eff <a href="Control-Effect.html#t:-61--61-" title="Control.Effect">==</a> <a href="Control-Effect-Writer.html#t:Writer" title="Control.Effect.Writer">Writer</a> w</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type family</span> a <a id="t:-61--61-" class="def">==</a> b <span class="keyword">where ...</span> <a href="src/Control.Effect.Internal.html#%3D%3D" class="link">Source</a> <a href="#t:-61--61-" class="selflink">#</a></p><div class="doc"><p>Boolean equality on types.</p><p>This is essentially the same as <code>==</code> from <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Type-Equality.html">Data.Type.Equality</a>, but the version from
 <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Type-Equality.html">Data.Type.Equality</a> is written in such a way that allows GHC to deduce more information from
 <code>'<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code></code> results but causes trouble when trying to compute the equality of rigid type variables.
 This definition uses a simpler version.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src">a <a href="Control-Effect.html#t:-61--61-" title="Control.Effect">==</a> a = '<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">_ <a href="Control-Effect.html#t:-61--61-" title="Control.Effect">==</a> _ = '<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:Elem" class="def">Elem</a> (x :: k) (xs :: [k]) :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <span class="keyword">where ...</span> <a href="src/Control.Effect.Internal.html#Elem" class="link">Source</a> <a href="#t:Elem" class="selflink">#</a></p><div class="doc"><p>Checks if <code>x</code> is in the type-level list <code>xs</code> (like <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Foldable.html#v:elem" title="Data.Foldable">elem</a></code>, but at the type level).</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Control-Effect.html#t:Elem" title="Control.Effect">Elem</a> _ '[] = '<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Control-Effect.html#t:Elem" title="Control.Effect">Elem</a> x (x ': _) = '<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Control-Effect.html#t:Elem" title="Control.Effect">Elem</a> x (_ ': xs) = <a href="Control-Effect.html#t:Elem" title="Control.Effect">Elem</a> x xs</td><td class="doc empty">&nbsp;</td></tr></table></div></div><a href="#g:6" id="g:6"><h2>The <code>HandlerT</code> transformer</h2></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:HandlerT" class="def">HandlerT</a> tag ts m a <a href="src/Control.Effect.Internal.html#HandlerT" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></p><div class="doc"><p>A helper for defining effect handlers in terms of other, existing handlers. <code>(<code><a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a></code> tag
 ts)</code> is equivalent to <code>(<code><a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a></code> ts)</code>, but the phantom <code>tag</code> parameter is useful as a way to
 disambiguate between different handler instances.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:HandlerT" class="def">HandlerT</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:runHandlerT" class="def">runHandlerT</a> :: <a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:HandlerT">Instances</h4><details id="i:HandlerT" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:Writer:1"></span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> w, <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Control-Effect-Writer.html#t:Writer" title="Control.Effect.Writer">Writer</a> w (<a href="Control-Effect-Writer.html#t:WriterT" title="Control.Effect.Writer">WriterT</a> w m)</span> <a href="src/Control.Effect.Writer.html#line-60" class="link">Source</a> <a href="#t:Writer" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:Writer:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Writer.html">Control.Effect.Writer</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:tell">tell</a> :: w -&gt; <a href="Control-Effect-Writer.html#t:WriterT" title="Control.Effect.Writer">WriterT</a> w m () <a href="src/Control.Effect.Writer.html#tell" class="link">Source</a> <a href="#v:tell" class="selflink">#</a></p><p class="src"><a href="#v:listen">listen</a> :: <a href="Control-Effect-Writer.html#t:WriterT" title="Control.Effect.Writer">WriterT</a> w m a -&gt; <a href="Control-Effect-Writer.html#t:WriterT" title="Control.Effect.Writer">WriterT</a> w m (w, a) <a href="src/Control.Effect.Writer.html#listen" class="link">Source</a> <a href="#v:listen" class="selflink">#</a></p><p class="src"><a href="#v:censor">censor</a> :: (w -&gt; w) -&gt; <a href="Control-Effect-Writer.html#t:WriterT" title="Control.Effect.Writer">WriterT</a> w m a -&gt; <a href="Control-Effect-Writer.html#t:WriterT" title="Control.Effect.Writer">WriterT</a> w m a <a href="src/Control.Effect.Writer.html#censor" class="link">Source</a> <a href="#v:censor" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:MonadBase:2"></span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> b, <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/trnsfrmrs-bs-0.4.5.2-8b2d87c0/share/doc/html/Control-Monad-Base.html#t:MonadBase" title="Control.Monad.Base">MonadBase</a> b (<a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m)) =&gt; <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/trnsfrmrs-bs-0.4.5.2-8b2d87c0/share/doc/html/Control-Monad-Base.html#t:MonadBase" title="Control.Monad.Base">MonadBase</a> b (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m)</span> <a href="src/Control.Effect.Internal.html#line-124" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:MonadBase:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftBase">liftBase</a> :: b &#945; -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m &#945; <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/trnsfrmrs-bs-0.4.5.2-8b2d87c0/share/doc/html/src" class="link">Source</a> <a href="#v:liftBase" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:MonadBaseControl:3"></span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> b, <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadBaseControl" title="Control.Monad.Trans.Control">MonadBaseControl</a> b (<a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m)) =&gt; <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadBaseControl" title="Control.Monad.Trans.Control">MonadBaseControl</a> b (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m)</span> <a href="src/Control.Effect.Internal.html#line-125" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:MonadBaseControl:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m) a <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/src" class="link">Source</a> <a href="#t:StM" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftBaseWith">liftBaseWith</a> :: (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:RunInBase" title="Control.Monad.Trans.Control">RunInBase</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m) b -&gt; b a) -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/src" class="link">Source</a> <a href="#v:liftBaseWith" class="selflink">#</a></p><p class="src"><a href="#v:restoreM">restoreM</a> :: <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m) a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/src" class="link">Source</a> <a href="#v:restoreM" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:MonadTrans:4"></span> (<span class="keyword">forall</span> (m :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>). <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Control-Effect-Internal.html#t:MonadTransHandler" title="Control.Effect.Internal">MonadTransHandler</a> tag ts m) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/transformers-0.5.6.2/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts)</span> <a href="src/Control.Effect.Internal.html#line-138" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:MonadTrans:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="#v:lift" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:MonadTransControl:5"></span> (<span class="keyword">forall</span> (m :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>). <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Control-Effect-Internal.html#t:MonadTransControlHandler" title="Control.Effect.Internal">MonadTransControlHandler</a> tag ts m) =&gt; <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:MonadTransControl" title="Control.Monad.Trans.Control">MonadTransControl</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts)</span> <a href="src/Control.Effect.Internal.html#line-175" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:MonadTransControl:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StT" title="Control.Monad.Trans.Control">StT</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts) a <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/src" class="link">Source</a> <a href="#t:StT" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftWith">liftWith</a> :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:Run" title="Control.Monad.Trans.Control">Run</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts) -&gt; m a) -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/src" class="link">Source</a> <a href="#v:liftWith" class="selflink">#</a></p><p class="src"><a href="#v:restoreT">restoreT</a> :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; m (<a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StT" title="Control.Monad.Trans.Control">StT</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts) a) -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/src" class="link">Source</a> <a href="#v:restoreT" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:Monad:6"></span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (<a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m)</span> <a href="src/Control.Effect.Internal.html#line-121" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:Monad:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; (a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b) -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:Functor:7"></span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m)</span> <a href="src/Control.Effect.Internal.html#line-118" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:Functor:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:Applicative:8"></span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m)</span> <a href="src/Control.Effect.Internal.html#line-119" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:Applicative:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m (a -&gt; b) -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:MonadIO:9"></span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> (<a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m)</span> <a href="src/Control.Effect.Internal.html#line-123" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:MonadIO:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftIO">liftIO</a> :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="#v:liftIO" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:Alternative:10"></span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> (<a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m)</span> <a href="src/Control.Effect.Internal.html#line-120" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:Alternative:10"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:empty">empty</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="#v:empty" class="selflink">#</a></p><p class="src"><a href="#v:-60--124--62-">(&lt;|&gt;)</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="#v:-60--124--62-" class="selflink">#</a></p><p class="src"><a href="#v:some">some</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m [a] <a href="#v:some" class="selflink">#</a></p><p class="src"><a href="#v:many">many</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m [a] <a href="#v:many" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:MonadPlus:11"></span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:MonadPlus" title="Control.Monad">MonadPlus</a> (<a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m) =&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:MonadPlus" title="Control.Monad">MonadPlus</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m)</span> <a href="src/Control.Effect.Internal.html#line-122" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:MonadPlus:11"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mzero">mzero</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="#v:mzero" class="selflink">#</a></p><p class="src"><a href="#v:mplus">mplus</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="#v:mplus" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:MonadUnwind:12"></span> <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> (<a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m) =&gt; <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m)</span> <a href="src/Control.Effect.Resource.html#line-120" class="link">Source</a> <a href="#t:MonadUnwind" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:MonadUnwind:12"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:onException">onException</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="src/Control.Effect.Resource.html#onException" class="link">Source</a> <a href="#v:onException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:Handles:13"></span> <span class="keyword">type</span> <a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> (<a href="Control-Effect-Writer.html#t:WriterT" title="Control.Effect.Writer">WriterT</a> w) eff</span> <a href="src/Control.Effect.Writer.html#line-58" class="link">Source</a> <a href="#t:Handles" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:Handles:13"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Writer.html">Control.Effect.Writer</a></p> <div class="src"><span class="keyword">type</span> <a href="Control-Effect.html#t:Handles" title="Control.Effect">Handles</a> (<a href="Control-Effect-Writer.html#t:WriterT" title="Control.Effect.Writer">WriterT</a> w) eff = eff <a href="Control-Effect.html#t:-61--61-" title="Control.Effect">==</a> <a href="Control-Effect-Writer.html#t:Writer" title="Control.Effect.Writer">Writer</a> w</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:StT:14"></span> <span class="keyword">type</span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StT" title="Control.Monad.Trans.Control">StT</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts) a</span> <a href="src/Control.Effect.Internal.html#line-177" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:StT:14"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StT" title="Control.Monad.Trans.Control">StT</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts) a = <a href="Control-Effect-Internal.html#t:StEffsT" title="Control.Effect.Internal">StEffsT</a> ts a</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandlerT:StM:15"></span> <span class="keyword">type</span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m) a</span> <a href="src/Control.Effect.Internal.html#line-125" class="link">Source</a> <a href="#t:HandlerT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandlerT:StM:15"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Internal.html">Control.Effect.Internal</a></p> <div class="src"><span class="keyword">type</span> <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m) a = <a href="file:///Users/alexis/.cabal/store/ghc-8.8.1/mnd-cntrl-1.0.2.3-b06f566f/share/doc/html/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> (<a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m) a</div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>