<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Control.Effect.Resource</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">eff-0.0.0.0</span><ul class="links" id="page-menu"><li><a href="src/Control.Effect.Resource.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Effect.Resource</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Masking interrupts</a></li><li><a href="#g:2">Registering cleanup actions</a></li><li><a href="#g:3">Safe resource allocation and disposal</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides a set of classes and operations for safe resource allocation and disposal.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">class</span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="#t:Mask">Mask</a> m <span class="keyword">where</span><ul class="subs"><li><a href="#v:mask">mask</a> :: ((<span class="keyword">forall</span> a. m a -&gt; m a) -&gt; m b) -&gt; m b</li><li><a href="#v:uninterruptibleMask">uninterruptibleMask</a> :: ((<span class="keyword">forall</span> a. m a -&gt; m a) -&gt; m b) -&gt; m b</li></ul></li><li class="src short"><a href="#v:mask_">mask_</a> :: <a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> m =&gt; m a -&gt; m a</li><li class="src short"><a href="#v:uninterruptibleMask_">uninterruptibleMask_</a> :: <a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> m =&gt; m a -&gt; m a</li><li class="src short"><span class="keyword">class</span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="#t:MonadUnwind">MonadUnwind</a> m <span class="keyword">where</span><ul class="subs"><li><a href="#v:onException">onException</a> :: m a -&gt; m b -&gt; m a</li></ul></li><li class="src short"><span class="keyword">class</span> (<a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> m, <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> m) =&gt; <a href="#t:Resource">Resource</a> m</li><li class="src short"><a href="#v:finally">finally</a> :: <a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a> m =&gt; m a -&gt; m b -&gt; m a</li><li class="src short"><a href="#v:bracket">bracket</a> :: <a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a> m =&gt; m a -&gt; (a -&gt; m c) -&gt; (a -&gt; m b) -&gt; m b</li><li class="src short"><a href="#v:bracket_">bracket_</a> :: <a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a> m =&gt; m a -&gt; m c -&gt; m b -&gt; m b</li><li class="src short"><a href="#v:bracketOnError">bracketOnError</a> :: <a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a> m =&gt; m a -&gt; (a -&gt; m c) -&gt; (a -&gt; m b) -&gt; m b</li><li class="src short"><a href="#v:bracketOnError_">bracketOnError_</a> :: <a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a> m =&gt; m a -&gt; m c -&gt; m b -&gt; m b</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Masking interrupts</h1></a><div class="top"><p class="src"><span class="keyword">class</span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a id="t:Mask" class="def">Mask</a> m <span class="keyword">where</span> <a href="src/Control.Effect.Resource.html#Mask" class="link">Source</a> <a href="#t:Mask" class="selflink">#</a></p><div class="doc"><p>An effect that provides the ability to temporarily mask asynchronous interrupts.</p><p>Unlike most effects, this effect does not have its own handler; there is no separate <code>runMask</code>
 operation. This is because the usual handler for <code><a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a></code> is <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a></code>, which is always at the base of
 a monad transformer stack.</p><p><code><a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a></code> may be used in pure computations (where both <code><a href="Control-Effect-Resource.html#v:mask" title="Control.Effect.Resource">mask</a></code> and <code><a href="Control-Effect-Resource.html#v:uninterruptibleMask" title="Control.Effect.Resource">uninterruptibleMask</a></code> are no-ops),
 but it can only be discharged by <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#v:runIdentity" title="Data.Functor.Identity">runIdentity</a></code>, which serves as a proof that the computation is,
 in fact, pure.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:mask" class="def">mask</a> :: ((<span class="keyword">forall</span> a. m a -&gt; m a) -&gt; m b) -&gt; m b <a href="src/Control.Effect.Resource.html#mask" class="link">Source</a> <a href="#v:mask" class="selflink">#</a></p><div class="doc"><p>Executes a computation with asynchronous interrupts masked; see
 <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Exception.html">Control.Exception</a>.<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Exception-Base.html#v:mask" title="Control.Exception.Base">mask</a></code></code> for details.</p></div><p class="src"><a id="v:uninterruptibleMask" class="def">uninterruptibleMask</a> :: ((<span class="keyword">forall</span> a. m a -&gt; m a) -&gt; m b) -&gt; m b <a href="src/Control.Effect.Resource.html#uninterruptibleMask" class="link">Source</a> <a href="#v:uninterruptibleMask" class="selflink">#</a></p><div class="doc"><p>Executes a computation with asynchronous interrupts uninterruptibly masked.
 <strong>This should be used with great care</strong>; see <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Exception.html">Control.Exception</a>.<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Exception-Base.html#v:uninterruptibleMask" title="Control.Exception.Base">uninterruptibleMask</a></code></code> for
 details.</p></div></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Mask">Instances</h4><details id="i:Mask" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Mask:Mask:1"></span> <a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a></span> <a href="src/Control.Effect.Resource.html#line-64" class="link">Source</a> <a href="#t:Mask" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Mask:Mask:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mask">mask</a> :: ((<span class="keyword">forall</span> a. <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a) -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> b <a href="src/Control.Effect.Resource.html#mask" class="link">Source</a> <a href="#v:mask" class="selflink">#</a></p><p class="src"><a href="#v:uninterruptibleMask">uninterruptibleMask</a> :: ((<span class="keyword">forall</span> a. <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a) -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> b <a href="src/Control.Effect.Resource.html#uninterruptibleMask" class="link">Source</a> <a href="#v:uninterruptibleMask" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Mask:Mask:2"></span> <a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a></span> <a href="src/Control.Effect.Resource.html#line-58" class="link">Source</a> <a href="#t:Mask" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Mask:Mask:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mask">mask</a> :: ((<span class="keyword">forall</span> a. <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> a -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> a) -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> b) -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> b <a href="src/Control.Effect.Resource.html#mask" class="link">Source</a> <a href="#v:mask" class="selflink">#</a></p><p class="src"><a href="#v:uninterruptibleMask">uninterruptibleMask</a> :: ((<span class="keyword">forall</span> a. <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> a -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> a) -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> b) -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> b <a href="src/Control.Effect.Resource.html#uninterruptibleMask" class="link">Source</a> <a href="#v:uninterruptibleMask" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Mask:Mask:3"></span> (<a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t m), <a href="Control-Effect.html#t:Send" title="Control.Effect">Send</a> <a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> t m) =&gt; <a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Resource.html#line-83" class="link">Source</a> <a href="#t:Mask" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Mask:Mask:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mask">mask</a> :: ((<span class="keyword">forall</span> a. <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b <a href="src/Control.Effect.Resource.html#mask" class="link">Source</a> <a href="#v:mask" class="selflink">#</a></p><p class="src"><a href="#v:uninterruptibleMask">uninterruptibleMask</a> :: ((<span class="keyword">forall</span> a. <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b) -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b <a href="src/Control.Effect.Resource.html#uninterruptibleMask" class="link">Source</a> <a href="#v:uninterruptibleMask" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:mask_" class="def">mask_</a> :: <a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> m =&gt; m a -&gt; m a <a href="src/Control.Effect.Resource.html#mask_" class="link">Source</a> <a href="#v:mask_" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Effect-Resource.html#v:mask" title="Control.Effect.Resource">mask</a></code>, but does not pass a <code>restore</code> action to its argument.</p></div></div><div class="top"><p class="src"><a id="v:uninterruptibleMask_" class="def">uninterruptibleMask_</a> :: <a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> m =&gt; m a -&gt; m a <a href="src/Control.Effect.Resource.html#uninterruptibleMask_" class="link">Source</a> <a href="#v:uninterruptibleMask_" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Effect-Resource.html#v:uninterruptibleMask" title="Control.Effect.Resource">uninterruptibleMask</a></code>, but does not pass a <code>restore</code> action to its argument.</p></div></div><a href="#g:2" id="g:2"><h1>Registering cleanup actions</h1></a><div class="top"><p class="src"><span class="keyword">class</span> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a id="t:MonadUnwind" class="def">MonadUnwind</a> m <span class="keyword">where</span> <a href="src/Control.Effect.Resource.html#MonadUnwind" class="link">Source</a> <a href="#t:MonadUnwind" class="selflink">#</a></p><div class="doc"><p>The class of monads that support registering cleanup actions on failure. Note that this is
 <strong>not</strong> an effect; it cannot be automatically lifted through <code><a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a></code> the way effects can. Doing so
 would be unsafe, as different handlers may provide arbitrarily different notions of failure, and
 they must supply <code><a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a></code> instances to ensure those failures are not ignored. However, note
 that any handlers defined using <code><a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a></code> do <em>not</em> need their own <code><a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a></code> instances, as
 they will inherit the instance of their underlying handlers.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:onException" class="def">onException</a> :: m a -&gt; m b -&gt; m a <a href="src/Control.Effect.Resource.html#onException" class="link">Source</a> <a href="#v:onException" class="selflink">#</a></p><div class="doc"><p><code>(<em>a</em> `<code><a href="Control-Effect-Resource.html#v:onException" title="Control.Effect.Resource">onException</a></code>` <em>b</em>)</code> runs <code><em>a</em></code>. If and only if it fails with an error, <code><em>b</em></code> is
 executed for side effects (with asynchronous exceptions masked, if relevant), after which the
 error is re-raised. If <code><em>b</em></code> fails with an error, its error takes priority over the error
 raised by <code><em>a</em></code>.</p><p><code><a href="Control-Effect-Resource.html#v:onException" title="Control.Effect.Resource">onException</a></code> <em>cannot</em> generally be used to ensure the disposal of an acquired resource because
 an asynchronous exception might be raised after the resource is acquired but before the
 exception handler is installed. For safe resource management, use <code><a href="Control-Effect-Resource.html#v:bracket" title="Control.Effect.Resource">bracket</a></code> or
 <code><a href="Control-Effect-Resource.html#v:bracketOnError_" title="Control.Effect.Resource">bracketOnError_</a></code> instead.</p><p>Note that because the error is re-raised after <code><em>b</em></code> is executed, changes to the monadic state
 made by <code><em>b</em></code> will be discarded for any effects handled more locally than the effect that
 triggered the failure.</p></div></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MonadUnwind">Instances</h4><details id="i:MonadUnwind" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadUnwind:MonadUnwind:1"></span> <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a></span> <a href="src/Control.Effect.Resource.html#line-115" class="link">Source</a> <a href="#t:MonadUnwind" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MonadUnwind:MonadUnwind:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:onException">onException</a> :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> b -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a <a href="src/Control.Effect.Resource.html#onException" class="link">Source</a> <a href="#v:onException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadUnwind:MonadUnwind:2"></span> <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a></span> <a href="src/Control.Effect.Resource.html#line-111" class="link">Source</a> <a href="#t:MonadUnwind" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MonadUnwind:MonadUnwind:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:onException">onException</a> :: <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> a -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> b -&gt; <a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> a <a href="src/Control.Effect.Resource.html#onException" class="link">Source</a> <a href="#v:onException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadUnwind:MonadUnwind:3"></span> <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> m =&gt; <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> (<a href="Control-Effect-Reader.html#t:ReaderT" title="Control.Effect.Reader">ReaderT</a> r m)</span> <a href="src/Control.Effect.Resource.html#line-126" class="link">Source</a> <a href="#t:MonadUnwind" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MonadUnwind:MonadUnwind:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:onException">onException</a> :: <a href="Control-Effect-Reader.html#t:ReaderT" title="Control.Effect.Reader">ReaderT</a> r m a -&gt; <a href="Control-Effect-Reader.html#t:ReaderT" title="Control.Effect.Reader">ReaderT</a> r m b -&gt; <a href="Control-Effect-Reader.html#t:ReaderT" title="Control.Effect.Reader">ReaderT</a> r m a <a href="src/Control.Effect.Resource.html#onException" class="link">Source</a> <a href="#v:onException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadUnwind:MonadUnwind:4"></span> <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> m =&gt; <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> (<a href="Control-Effect-Error.html#t:ExceptT" title="Control.Effect.Error">ExceptT</a> e m)</span> <a href="src/Control.Effect.Resource.html#line-133" class="link">Source</a> <a href="#t:MonadUnwind" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MonadUnwind:MonadUnwind:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:onException">onException</a> :: <a href="Control-Effect-Error.html#t:ExceptT" title="Control.Effect.Error">ExceptT</a> e m a -&gt; <a href="Control-Effect-Error.html#t:ExceptT" title="Control.Effect.Error">ExceptT</a> e m b -&gt; <a href="Control-Effect-Error.html#t:ExceptT" title="Control.Effect.Error">ExceptT</a> e m a <a href="src/Control.Effect.Resource.html#onException" class="link">Source</a> <a href="#v:onException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadUnwind:MonadUnwind:5"></span> <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> m =&gt; <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> (<a href="Control-Effect-State.html#t:StateT" title="Control.Effect.State">StateT</a> r m)</span> <a href="src/Control.Effect.Resource.html#line-129" class="link">Source</a> <a href="#t:MonadUnwind" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MonadUnwind:MonadUnwind:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:onException">onException</a> :: <a href="Control-Effect-State.html#t:StateT" title="Control.Effect.State">StateT</a> r m a -&gt; <a href="Control-Effect-State.html#t:StateT" title="Control.Effect.State">StateT</a> r m b -&gt; <a href="Control-Effect-State.html#t:StateT" title="Control.Effect.State">StateT</a> r m a <a href="src/Control.Effect.Resource.html#onException" class="link">Source</a> <a href="#v:onException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadUnwind:MonadUnwind:6"></span> <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> (t m) =&gt; <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> (<a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m)</span> <a href="src/Control.Effect.Resource.html#line-119" class="link">Source</a> <a href="#t:MonadUnwind" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MonadUnwind:MonadUnwind:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:onException">onException</a> :: <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m b -&gt; <a href="Control-Effect.html#t:EffT" title="Control.Effect">EffT</a> t m a <a href="src/Control.Effect.Resource.html#onException" class="link">Source</a> <a href="#v:onException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadUnwind:MonadUnwind:7"></span> <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> (<a href="Control-Effect.html#t:EffsT" title="Control.Effect">EffsT</a> ts m) =&gt; <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> (<a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m)</span> <a href="src/Control.Effect.Resource.html#line-120" class="link">Source</a> <a href="#t:MonadUnwind" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MonadUnwind:MonadUnwind:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:onException">onException</a> :: <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m b -&gt; <a href="Control-Effect.html#t:HandlerT" title="Control.Effect">HandlerT</a> tag ts m a <a href="src/Control.Effect.Resource.html#onException" class="link">Source</a> <a href="#v:onException" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:3" id="g:3"><h1>Safe resource allocation and disposal</h1></a><div class="top"><p class="src"><span class="keyword">class</span> (<a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> m, <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> m) =&gt; <a id="t:Resource" class="def">Resource</a> m <a href="src/Control.Effect.Resource.html#Resource" class="link">Source</a> <a href="#t:Resource" class="selflink">#</a></p><div class="doc"><p><code>(<code><a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a></code> m)</code> is a constraint synonym for <code>(<code><a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a></code> m, <code><a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a></code> m)</code>, which together
 provide the operations necessary for safe resource allocation and disposal. The most frequently
 used operations of <code><a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a></code> are <code><a href="Control-Effect-Resource.html#v:bracket" title="Control.Effect.Resource">bracket</a></code> and <code><a href="Control-Effect-Resource.html#v:bracketOnError" title="Control.Effect.Resource">bracketOnError</a></code>.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Resource">Instances</h4><details id="i:Resource" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Resource:Resource:1"></span> (<a href="Control-Effect-Resource.html#t:Mask" title="Control.Effect.Resource">Mask</a> m, <a href="Control-Effect-Resource.html#t:MonadUnwind" title="Control.Effect.Resource">MonadUnwind</a> m) =&gt; <a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a> m</span> <a href="src/Control.Effect.Resource.html#line-146" class="link">Source</a> <a href="#t:Resource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Resource:Resource:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Effect-Resource.html">Control.Effect.Resource</a></p></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:finally" class="def">finally</a> :: <a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a> m =&gt; m a -&gt; m b -&gt; m a <a href="src/Control.Effect.Resource.html#finally" class="link">Source</a> <a href="#v:finally" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Effect-Resource.html#v:onException" title="Control.Effect.Resource">onException</a></code>, but the action provided for the second argument is unconditionally
 executed, whether an error was raised or not.</p></div></div><div class="top"><p class="src"><a id="v:bracket" class="def">bracket</a> <a href="src/Control.Effect.Resource.html#bracket" class="link">Source</a> <a href="#v:bracket" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; m a</td><td class="doc"><p>Acquire some resource.</p></td></tr><tr><td class="src">-&gt; (a -&gt; m c)</td><td class="doc"><p>Dispose the resource.</p></td></tr><tr><td class="src">-&gt; (a -&gt; m b)</td><td class="doc"><p>Use the resource.</p></td></tr><tr><td class="src">-&gt; m b</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Safely acquires a resource for the dynamic extent of a nested computation given actions to
 acquire and dispose it. See also <code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Exception.html">Control.Exception</a>.<code><a href="file:///Users/alexis/.stack/programs/x86_64-osx/ghc-8.8.1/share/doc/ghc-8.8.1/html/libraries/base-4.13.0.0/Control-Exception-Base.html#v:bracket" title="Control.Exception.Base">bracket</a></code></code>.</p></div></div><div class="top"><p class="src"><a id="v:bracket_" class="def">bracket_</a> :: <a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a> m =&gt; m a -&gt; m c -&gt; m b -&gt; m b <a href="src/Control.Effect.Resource.html#bracket_" class="link">Source</a> <a href="#v:bracket_" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Effect-Resource.html#v:bracket" title="Control.Effect.Resource">bracket</a></code>, but the return value from the first argument is ignored.</p></div></div><div class="top"><p class="src"><a id="v:bracketOnError" class="def">bracketOnError</a> <a href="src/Control.Effect.Resource.html#bracketOnError" class="link">Source</a> <a href="#v:bracketOnError" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; m a</td><td class="doc"><p>Acquire some resource.</p></td></tr><tr><td class="src">-&gt; (a -&gt; m c)</td><td class="doc"><p>Dispose the resource.</p></td></tr><tr><td class="src">-&gt; (a -&gt; m b)</td><td class="doc"><p>Use the resource.</p></td></tr><tr><td class="src">-&gt; m b</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Like <code><a href="Control-Effect-Resource.html#v:bracket" title="Control.Effect.Resource">bracket</a></code>, but the dispose action is only executed if an error is raised during the
 dynamic extent of the primary computation.</p></div></div><div class="top"><p class="src"><a id="v:bracketOnError_" class="def">bracketOnError_</a> :: <a href="Control-Effect-Resource.html#t:Resource" title="Control.Effect.Resource">Resource</a> m =&gt; m a -&gt; m c -&gt; m b -&gt; m b <a href="src/Control.Effect.Resource.html#bracketOnError_" class="link">Source</a> <a href="#v:bracketOnError_" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Control-Effect-Resource.html#v:bracketOnError" title="Control.Effect.Resource">bracketOnError</a></code>, but the return value from the first argument is ignored.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>